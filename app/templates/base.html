<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Invoicing App{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen">
  <nav class="bg-white shadow mb-6">
    <div class="max-w-5xl mx-auto px-4 py-3 flex justify-between items-center">
      <a href="/dashboard" class="text-lg font-semibold text-gray-800">
        Invoicing App
      </a>
      <div class="space-x-4">
        {% if current_user.is_authenticated %}
          <a href="/customers-ui" class="text-sm text-gray-700 hover:text-blue-600">Customers</a>
          <a href="/items-ui" class="text-sm text-gray-700 hover:text-blue-600">Items</a>
          <a href="/invoices-ui" class="text-sm text-gray-700 hover:text-blue-600">Invoices</a>
          <button id="logoutBtn" class="text-sm text-red-600 hover:text-red-800">Logout</button>
        {% else %}
          <a href="/login" class="text-sm text-gray-700 hover:text-blue-600">Login</a>
          <a href="/register" class="text-sm text-gray-700 hover:text-blue-600">Register</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <main class="max-w-5xl mx-auto px-4">
    {% block content %}{% endblock %}
  </main>

  <script>
    // logout using existing /auth/logout API
    document.addEventListener('DOMContentLoaded', () => {
      const logoutBtn = document.getElementById('logoutBtn');
      if (logoutBtn) {
        logoutBtn.addEventListener('click', async () => {
          try {
            const res = await fetch('/auth/logout', { method: 'POST' });
            if (res.ok) {
              window.location.href = '/login';
            }
          } catch (err) {
            console.error(err);
          }
        });
      }
    });
  </script>

  {% block scripts %}{% endblock %}
</body>
</html>
